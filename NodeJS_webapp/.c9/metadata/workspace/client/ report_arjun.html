{"filter":false,"title":" report_arjun.html","tooltip":"/client/ report_arjun.html","undoManager":{"mark":8,"position":8,"stack":[[{"start":{"row":0,"column":0},"end":{"row":235,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<html>","<head>"," <script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>","","  <!--<script type=\"text/javascript\" src=\"//code.jquery.com/jquery-1.10.2.js\"></script>-->","    <script type=\"text/javascript\" src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"></script>","        <link rel='stylesheet' type='text/css' href='//code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css'/>","        ","        ","        ","         <meta charset=\"utf-8\">","    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">","    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">","    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->","    <meta name=\"description\" content=\"\">","    <meta name=\"author\" content=\"\">","    <link rel=\"icon\" href=\"../../favicon.ico\">","","    <title>Report Generation</title>","","    <!-- Bootstrap core CSS -->","    <link href=\"./css/bootstrap.min.css\" rel=\"stylesheet\">","    <!--<link href=\"./css/bootstrap.css\" rel=\"stylesheet\">-->","","   <link href=\"./css/new-template-pally.css\" rel=\"stylesheet\">","        ","        ","<script type=\"text/javascript\" src=\"\">","\tvar jsondata =  JSON.stringify(jsondata);","</script>>","","</head>","","<body onload = selectChart()>","\t","\t","\t","\t <nav class=\"navbar navbar-inverse navbar-fixed-top\">","      <div class=\"container\">","        <div class=\"navbar-header\">","          <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar\" aria-expanded=\"false\" aria-controls=\"navbar\">","            <span class=\"sr-only\">Toggle navigation</span>","            <span class=\"icon-bar\"></span>","            <span class=\"icon-bar\"></span>","            <span class=\"icon-bar\"></span>","          </button>","          <a class=\"navbar-brand\" href=\"#\">Express Hotel - Mini Hotel Management - CmpE275</a>","        </div>","        <div id=\"navbar\" class=\"collapse navbar-collapse\">","          <ul class=\"nav navbar-nav\">","            <li ><a href=\"index.html\">Home</a></li>","          ","          </ul>","        </div><!--/.nav-collapse -->","      </div>","    </nav>","\t","\t","\t","\t","\t","\t","","<script>","//------------Json data should be fixed here--------------//","","// var jsondata = {","//   \"notOccupiedCount\": [","//     27","//   ],","//   \"reservedrooms\": [","//     100,","//     101,","//     102,","//     108","//   ],","//   \"occupiedrooms\": [","//     107,","//     109","//   ]","// }","","// var jsondata =  JSON.stringify(jsondata);","// var jsondata =  JSON.parse(jsondata);","// console.log(jsondata);","</script>","","<script>","","","</script>","","<script>","","","//--- Get todays date for comparison----select which map to pick-----First script to load------//","","\tfunction selectChart(){","\t//alert(\"JSON data is: \" + jsonData);","\t\tDate.prototype.yyyymmdd = function() {","\t\t   var yyyy = this.getFullYear().toString();","\t\t   var mm = (this.getMonth()+1).toString(); // getMonth() is zero-based","\t\t   var dd  = this.getDate().toString();","\t\t   return yyyy + \"-\" + (mm[1]?mm:\"0\"+mm[0]) + \"-\" +(dd[1]?dd:\"0\"+dd[0]); // padding","\t\t};","","","\t\t// Get todays date","\t\tvar \td = new Date();","\t\td.yyyymmdd();","\t\t","\t\t// Get date for one year from now","\t\tvar d2 = new Date();","\t\td2.setDate(d2.getDate() + 1);","\t\t","\t\t","\t\t//----- By default post todays date----//","\t\t //var xhr = new XMLHttpRequest();","   //   xhr.open(\"POST\", \"/postDateForReport\", true);","   //   xhr.send(d.yyyymmdd());","   ","   ","   ","\t//-- get date from textbox-------//\t","\t\tvar setDate= document.getElementById(\"datepicker\").value","\t","\t","\t// ------- Comaprares todays date with set date---------//\t","\t\tif(setDate < '2015-01-01'){","\t\t\talert(\"The hotel was created on 1st Jan 2015. Date should be after this date.\");","\t\t}","\t\telse if(setDate > d2.yyyymmdd()){","\t\t\talert(\"Booking can only be made for one year from now\");","\t\t}","\t\telse if(setDate==d.yyyymmdd()){","\t\t\t","\t\t\tdrawChart();","\t\t\t\t\t","\t\t}else if(setDate>d.yyyymmdd()){","\t\t\tdrawChart2(); ","\t\t","\t\t}else if(setDate<d.yyyymmdd()){","\t\t\tdrawChart3() ;","\t\t}","\t\t","\t};","\t","\t","\t// -------------- Select which Charts to draw depending on date comparison-------------------------------","\t","\tvar\tjsondata = this.jsonData;","\t\t\t","\t\t\tvar occupiedCount = Object.keys(jsondata.occupiedrooms).length;","\t\t\tvar notOccupied= jsondata.notOccupiedCount[0];","\t\t\tvar reserved= Object.keys(jsondata.reservedrooms).length;","","\t\t\t  google.load(\"visualization\", \"1\", {packages:[\"corechart\"]});","\t\t\t  google.setOnLoadCallback(drawChart());","\t\t//\t  alert(\"before callback\");","\t\t\t  ","\t\t\t  function drawChart() {","\t\t\t//\talert(\"In function\");","\t\t\t\tvar data = google.visualization.arrayToDataTable([","\t\t\t\t  ['Occupancy', 'Count'],","\t\t\t\t  ['Rooms Occupied: ' + occupiedCount, occupiedCount],","\t\t\t\t  ['Rooms Reserved: ' + reserved, reserved],","\t\t\t\t  ['Empty Rooms: ' + notOccupied,  notOccupied],","\t\t\t\t]);","\t\t\t\t","","\t\t\t\tvar options = {","\t\t\t\t  title: 'Occupancy'","\t\t\t\t};","","\t\t\t\tvar chart = new google.visualization.PieChart(document.getElementById('piechart'));","\t\t\t\tchart.draw(data, options);\t","\t\t\t};","\t\t\t","\t\t\tfunction drawChart2() {","\t\t\t\t","\t\t\t\tvar data = google.visualization.arrayToDataTable([","\t\t\t\t  ['Occupancy', 'Count'],","\t\t\t\t","\t\t\t\t  ['Rooms Reserved: '+ 7, reserved],","\t\t\t\t  ['Empty Rooms: ' + 21,  notOccupied],","\t\t\t\t]);","\t\t\t\t","","\t\t\t\tvar options = {","\t\t\t\t  title: 'Occupancy'","\t\t\t\t};","","\t\t\t\tvar chart = new google.visualization.PieChart(document.getElementById('piechart'));","\t\t\t\tchart.draw(data, options);\t","\t\t\t};","\t\t\t","\t\t\tfunction drawChart3() {","\t\t\t\t","\t\t\t\tvar data = google.visualization.arrayToDataTable([","\t\t\t\t  ['Occupancy', 'Count'],","\t\t\t\t  ['Rooms Occupied: ' + occupiedCount, occupiedCount],","\t\t\t\t ","\t\t\t\t  ['Empty Rooms: ' + notOccupied,  notOccupied],","\t\t\t\t]);","\t\t\t//\talert(\"after data\");","","\t\t\t\tvar options = {","\t\t\t\t  title: 'Occupancy'","\t\t\t\t};","","\t\t\t\tvar chart = new google.visualization.PieChart(document.getElementById('piechart'));","\t\t\t\tchart.draw(data, options);\t","\t\t\t};","\t\t\t","\t\t\t","\t\t\t","\t</script>","","\t<div id=\"container\" style= \"position: relative; width: 800px;\">","\t\t<table>","\t\t\t<td>","\t\t\t\t<div id=\"piechart\" style=\"width: 900px; height: 500px;\"></div>","\t\t\t</td>","\t\t\t<td>","\t\t\t\t<form style=\"text-align:center;\" class=\"head-para\" name='report' action=\"/postDateForReport\" method='POST' enctype='application/json'>","\t\t\t\t<p>Date: <input type=\"date\" id=\"datepicker\" name=\"date\"> </p>","\t\t\t\t<input type=\"submit\" value=\"Submit\">","\t\t\t\t<!--<button id = 'submit_date' type= submit> Submit </button>-->","\t\t\t\t</br>","\t\t\t\t</form>","\t\t\t</td>","\t\t</table>","\t</div>","</body>","</html>"],"id":1}],[{"start":{"row":148,"column":0},"end":{"row":217,"column":10},"action":"remove","lines":["\t","\t// -------------- Select which Charts to draw depending on date comparison-------------------------------","\t","\tvar\tjsondata = this.jsonData;","\t\t\t","\t\t\tvar occupiedCount = Object.keys(jsondata.occupiedrooms).length;","\t\t\tvar notOccupied= jsondata.notOccupiedCount[0];","\t\t\tvar reserved= Object.keys(jsondata.reservedrooms).length;","","\t\t\t  google.load(\"visualization\", \"1\", {packages:[\"corechart\"]});","\t\t\t  google.setOnLoadCallback(drawChart());","\t\t//\t  alert(\"before callback\");","\t\t\t  ","\t\t\t  function drawChart() {","\t\t\t//\talert(\"In function\");","\t\t\t\tvar data = google.visualization.arrayToDataTable([","\t\t\t\t  ['Occupancy', 'Count'],","\t\t\t\t  ['Rooms Occupied: ' + occupiedCount, occupiedCount],","\t\t\t\t  ['Rooms Reserved: ' + reserved, reserved],","\t\t\t\t  ['Empty Rooms: ' + notOccupied,  notOccupied],","\t\t\t\t]);","\t\t\t\t","","\t\t\t\tvar options = {","\t\t\t\t  title: 'Occupancy'","\t\t\t\t};","","\t\t\t\tvar chart = new google.visualization.PieChart(document.getElementById('piechart'));","\t\t\t\tchart.draw(data, options);\t","\t\t\t};","\t\t\t","\t\t\tfunction drawChart2() {","\t\t\t\t","\t\t\t\tvar data = google.visualization.arrayToDataTable([","\t\t\t\t  ['Occupancy', 'Count'],","\t\t\t\t","\t\t\t\t  ['Rooms Reserved: '+ 7, reserved],","\t\t\t\t  ['Empty Rooms: ' + 21,  notOccupied],","\t\t\t\t]);","\t\t\t\t","","\t\t\t\tvar options = {","\t\t\t\t  title: 'Occupancy'","\t\t\t\t};","","\t\t\t\tvar chart = new google.visualization.PieChart(document.getElementById('piechart'));","\t\t\t\tchart.draw(data, options);\t","\t\t\t};","\t\t\t","\t\t\tfunction drawChart3() {","\t\t\t\t","\t\t\t\tvar data = google.visualization.arrayToDataTable([","\t\t\t\t  ['Occupancy', 'Count'],","\t\t\t\t  ['Rooms Occupied: ' + occupiedCount, occupiedCount],","\t\t\t\t ","\t\t\t\t  ['Empty Rooms: ' + notOccupied,  notOccupied],","\t\t\t\t]);","\t\t\t//\talert(\"after data\");","","\t\t\t\tvar options = {","\t\t\t\t  title: 'Occupancy'","\t\t\t\t};","","\t\t\t\tvar chart = new google.visualization.PieChart(document.getElementById('piechart'));","\t\t\t\tchart.draw(data, options);\t","\t\t\t};","\t\t\t","\t\t\t","\t\t\t","\t</script>"],"id":2}],[{"start":{"row":87,"column":0},"end":{"row":146,"column":3},"action":"remove","lines":["","<script>","","","</script>","","<script>","","","//--- Get todays date for comparison----select which map to pick-----First script to load------//","","\tfunction selectChart(){","\t//alert(\"JSON data is: \" + jsonData);","\t\tDate.prototype.yyyymmdd = function() {","\t\t   var yyyy = this.getFullYear().toString();","\t\t   var mm = (this.getMonth()+1).toString(); // getMonth() is zero-based","\t\t   var dd  = this.getDate().toString();","\t\t   return yyyy + \"-\" + (mm[1]?mm:\"0\"+mm[0]) + \"-\" +(dd[1]?dd:\"0\"+dd[0]); // padding","\t\t};","","","\t\t// Get todays date","\t\tvar \td = new Date();","\t\td.yyyymmdd();","\t\t","\t\t// Get date for one year from now","\t\tvar d2 = new Date();","\t\td2.setDate(d2.getDate() + 1);","\t\t","\t\t","\t\t//----- By default post todays date----//","\t\t //var xhr = new XMLHttpRequest();","   //   xhr.open(\"POST\", \"/postDateForReport\", true);","   //   xhr.send(d.yyyymmdd());","   ","   ","   ","\t//-- get date from textbox-------//\t","\t\tvar setDate= document.getElementById(\"datepicker\").value","\t","\t","\t// ------- Comaprares todays date with set date---------//\t","\t\tif(setDate < '2015-01-01'){","\t\t\talert(\"The hotel was created on 1st Jan 2015. Date should be after this date.\");","\t\t}","\t\telse if(setDate > d2.yyyymmdd()){","\t\t\talert(\"Booking can only be made for one year from now\");","\t\t}","\t\telse if(setDate==d.yyyymmdd()){","\t\t\t","\t\t\tdrawChart();","\t\t\t\t\t","\t\t}else if(setDate>d.yyyymmdd()){","\t\t\tdrawChart2(); ","\t\t","\t\t}else if(setDate<d.yyyymmdd()){","\t\t\tdrawChart3() ;","\t\t}","\t\t","\t};"],"id":3}],[{"start":{"row":64,"column":0},"end":{"row":86,"column":9},"action":"remove","lines":["<script>","//------------Json data should be fixed here--------------//","","// var jsondata = {","//   \"notOccupiedCount\": [","//     27","//   ],","//   \"reservedrooms\": [","//     100,","//     101,","//     102,","//     108","//   ],","//   \"occupiedrooms\": [","//     107,","//     109","//   ]","// }","","// var jsondata =  JSON.stringify(jsondata);","// var jsondata =  JSON.parse(jsondata);","// console.log(jsondata);","</script>"],"id":4}],[{"start":{"row":59,"column":0},"end":{"row":67,"column":0},"action":"remove","lines":["\t","\t","\t","\t","","","","\t",""],"id":5}],[{"start":{"row":58,"column":1},"end":{"row":59,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":58,"column":0},"end":{"row":58,"column":1},"action":"remove","lines":["\t"],"id":7}],[{"start":{"row":57,"column":1},"end":{"row":58,"column":0},"action":"remove","lines":["",""],"id":8}],[{"start":{"row":30,"column":9},"end":{"row":30,"column":10},"action":"remove","lines":[">"],"id":9}]]},"ace":{"folds":[],"scrolltop":379.5,"scrollleft":0,"selection":{"start":{"row":26,"column":8},"end":{"row":26,"column":8},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":131,"mode":"ace/mode/html"}},"timestamp":1450057934590,"hash":"1f267fa8b2cbb6957189fd4e00232c3a79a59c74"}